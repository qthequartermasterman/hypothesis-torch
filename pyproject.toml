[build-system]
requires = ["setuptools >= 61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "hypothesis-torch"
description = "Hypothesis strategies for various Pytorch structures, including tensors and modules."

dynamic = ["version"]
dependencies = [
    "hypothesis>=6.0.0",
    "torch>=1.13.0",
]
requires-python = ">=3.9"
authors=[{name="Andrew P. Sansom", email="andrew@euleriancircuit.com"}]
readme="README.md"
license={file="LICENSE"}
keywords = ["hypothesis", "torch", "pytorch", "testing", "property-based testing", "deep learning", "tensor", "neural network", "artificial intelligence", "machine learning"]
classifiers = [
    "Development Status :: 2 - Pre-Alpha",

    "Intended Audience :: Developers",
    "Framework :: Hypothesis",

    "License :: OSI Approved :: MIT License",

    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",

    "Topic :: Software Development :: Testing",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Scientific/Engineering :: Mathematics",
    "Topic :: Software Development",
    "Topic :: Software Development :: Libraries",
    "Topic :: Software Development :: Libraries :: Python Modules",
]
[project.entry-points."hypothesis"]
_ = "hypothesis_torch.register_random_torch_state:_register_random_torch_state"

[project.optional-dependencies]
huggingface = [
  "transformers>=4.0.0,<=4.41.2",
]
dev = [
  "mypy==1.10.0",
  "ruff==0.4.9",
  "pyright==1.1.367",
  "pytest==8.2.2",
  "pytest-cov==5.0.0"
]
docs = [
  "mkdocs==1.6.0",
  "mkdocstrings[python]==0.25.1",
  "mkdocs-autolinks-plugin==0.7.1",
  "mkdocs-material==9.5.26",
  "mkdocs-snippets==1.3.0",
  "mkdocs-exclude==1.0.2",
]

[project.urls]
Homepage = "https://github.com/qthequartermasterman/hypothesis-torch"
Documentation = "https://hypothesis-torch.readthedocs.io/en/stable/"
Repository = "https://github.com/qthequartermasterman/hypothesis-torch.git"
Issues = "https://github.com/qthequartermasterman/hypothesis-torch/issues"

[tool.ruff]
line-length = 120
preview = true

[tool.semantic_release]
major_on_zero = false
version_variables = [
    "hypothesis_torch/__init__.py:__version__",
]
build_command = "python -m pip install build && python -m build"

[tool.semantic_release.commit_parser_options]
allowed_tags = [
    "build",
    "chore",
    "ci",
    "docs",
    "feat",
    "fix",
    "perf",
    "style",
    "refactor",
    "test",
]
minor_tags = ["feat"]
patch_tags = ["fix", "perf", "build"]

[tool.setuptools.dynamic]
version = {attr = "hypothesis_torch.__version__"}


[tool.ruff.lint]
select = ["ANN", "D", "E", "F", "FURB", "I", "N", "PERF", "PTH", "RUF", "YTT", "UP", "W"]
ignore = ["D205", "F401", "PT009", "S101"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[[tool.mypy.overrides]]
module = ["transformers", "transformers.activations", "transformers.models", "annotated_types"]
ignore_missing_imports = true
